{"version":3,"sources":["app/scripts/index.jsx"],"names":[],"mappings":"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","file":"app/scripts/index.jsx","sourcesContent":["'use strict';\nvar PEER_API_KEY = 'qfsyx0jzn7xbhuxr';\n\nvar STATE = {\n  INITIAL: 0,\n  WAITING: 1,\n  PRESENTING: 2\n}\n\n$(document).ready(function() {\n\n\n  var App = React.createClass({\n\n    getInitialState: function() {\n      return {\n        state: STATE.INITIAL,\n        room: 'Hack the Planet'\n      }\n    },\n\n    onSubmit: function() {\n      this.connectToHost(this.state.room, {\n        title: this.state.title,\n        tagline: this.state.tagline\n      });\n    },\n\n    connectToHost: function(host, metadata) {\n      var that = this;\n      var peer = new Peer({key: PEER_API_KEY});\n\n      chrome.desktopCapture.chooseDesktopMedia(['screen', 'window'], function(id) {\n        if (!id) {\n          console.log('REJECTED');\n          return;\n        }\n\n        navigator.webkitGetUserMedia({\n          audio: false,\n          video: {\n              mandatory: {\n                  chromeMediaSource: 'desktop',\n                  chromeMediaSourceId: id,\n                  minWidth: 1280,\n                  maxWidth: 1280,\n                  minHeight: 720,\n                  maxHeight: 720\n              }\n          }\n        }, function(stream) {\n          var call = peer.call(host, stream, { metadata: metadata || {} });\n\n          call.on('error', console.log.bind(console));\n          call.on('close', console.log.bind(console));\n          that.setState({\n            state: STATE.WAITING,\n            call: call\n          });\n\n          var t = setInterval(function() {\n            console.log(call.open);\n            if (call.open) {\n              clearInterval(t);\n              that.setState({\n                state: STATE.PRESENTING\n              });\n            }\n          }, 1000);\n        }, function(e) {\n          that.setState({\n            state: STATE.INITIAL\n          });\n          // ERROR\n          console.log('getUserMediaError: ' + JSON.stringify(e, null, '---'));\n        });\n      });\n    },\n\n    disconnect: function() {\n      // @TODO(shrugs) - send a message to close the window\n      this.state.call.close();\n      this.setState({\n        state: STATE.INITIAL,\n        call: undefined\n      });\n    },\n\n    componentDidUpdate: function(prevProps, prevState) {\n      if (prevState.state !== STATE.PRESENTING && this.state.state === STATE.PRESENTING) {\n        // @TODO(shrugs) - send a message to minimize window\n      }\n    },\n\n    updateState: function(k) {\n      var that = this;\n      return function(e) {\n        var s = {}\n        s[k] = e.target.value;\n        that.setState(s);\n      };\n    },\n\n    render: function() {\n      if (this.state.state === STATE.INITIAL) {\n        var shouldShowSubmitButton = (this.state.title !== undefined && this.state.title.length) && (this.state.tagline !== undefined && this.state.tagline.length);\n        debugger;\n        return (\n          <div>\n            <img className=\"logo\" src=\"images/logo.png\"></img>\n            <h1 className=\"diamond\">diamond</h1>\n\n            <form>\n              <div>\n                <label htmlFor=\"room\"><h2>Event</h2></label>\n                <input value={this.state.room} onChange={this.updateState('room')} type=\"text\" name=\"room\"></input>\n              </div>\n              <div>\n                <label htmlFor=\"title\"><h2>Project Title</h2></label>\n                <input type=\"text\" name=\"title\" value={this.state.title} onChange={this.updateState('title')}></input>\n              </div>\n              <div>\n                <label htmlFor=\"tagline\"><h2 >Project Tagline</h2></label>\n                <textarea rows=\"2\" cols=\"18\" type=\"text\" name=\"tagline\" maxLength=\"140\" value={this.state.tagline} onChange={this.updateState('tagline')}></textarea>\n              </div>\n            </form>\n\n            <button className=\"submit-button\" onClick={this.onSubmit} disabled={!shouldShowSubmitButton}><h2>Step up!</h2></button>\n          </div>\n        );\n      } else if (this.state.state === STATE.WAITING) {\n        return (\n          <div style={{textAlign: 'center', fontSize: '6vw'}}>\n            <h3>Connected</h3>\n            <h1>You're on deck.</h1>\n          </div>\n        );\n      } else if (this.state.state === STATE.PRESENTING) {\n        return (\n          <div style={{\n            width: '100vw',\n            height: '100vh',\n            display: 'flex',\n            flexDirection: 'column',\n            flexWrap: 'nowrap',\n            justifyContent: 'center',\n            alignContent: 'flex-start',\n            alignItems: 'center'\n          }}>\n            <button className=\"submit-button\" onClick={this.disconnect}>Disconnect</button>\n          </div>\n        );\n      }\n    }\n  });\n\n  // $('.submit-button').on('click', function() {\n  //   connectToHost($('#room').val(), {\n  //     title: $('#title').val(),\n  //     tagline: $('#tagline').val()\n  //   });\n  // })\n\n  React.render(<App></App>, document.getElementById('main'));\n});\n"]}